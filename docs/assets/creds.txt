https://www.ray.so/#code=ZnJvbSBEZWVwZXJTZWVrIGltcG9ydCBEZWVwU2VlaywgVGhlbWUKCmFzeW5jIGRlZiBtYWluKCk6CiAgICAjIEluaXRpYWxpemUgdXNpbmcgZW1haWwgYW5kIHBhc3N3b3JkCiAgICBhcGkgPSBEZWVwU2VlaygKICAgICAgICBlbWFpbCA9ICJlbWFpbEBlbWFpbC5jb20iLAogICAgICAgIHBhc3N3b3JkID0gInBhc3N3b3JkIiwKICAgICAgICB2ZXJib3NlID0gRmFsc2UKICAgICkKICAgICMgT3IgeW91IGNhbiB1c2UgYSBzZXNzaW9uIHRva2VuIGluc3RlYWQKICAgIGFwaSA9IERlZXBTZWVrKAogICAgICAgIHRva2VuID0gc2Vzc2lvbl90b2tlbiwKICAgICAgICBoZWFkbGVzcyA9IFRydWUKICAgICkKCiAgICBhd2FpdCBhcGkuaW5pdGlhbGl6ZSgpICMgSW1wb3J0YW50CgogICAgIyBTZW5kIGEgbWVzc2FnZSB0byBEZWVwU2VlawogICAgcmVzcG9uc2UgPSBhd2FpdCBhcGkuc2VuZF9tZXNzYWdlKAogICAgICAgICJIZWxsbyBEZWVwU2VlayEiLAogICAgICAgIHNsb3dfbW9kZSA9IFRydWUsCiAgICAgICAgZGVlcHRoaW5rID0gRmFsc2UsCiAgICAgICAgc2VhcmNoID0gRmFsc2UsCiAgICAgICAgc2xvd19tb2RlX2RlbGF5ID0gMC4yNQogICAgKQogICAgcHJpbnQocmVzcG9uc2UudGV4dCwgcmVzcG9uc2UuY2hhdF9pZCkgIyBSZXR1cm4gdHlwZSBpcyBhIFJlc3BvbnNlIG9iamVjdAoKICAgICMgUmVnZW5lcmF0ZSB0aGUgbGFzdCByZXNwb25zZQogICAgbmV3X3Jlc3BvbnNlID0gYXdhaXQgYXBpLnJlZ2VuZXJhdGVfcmVzcG9uc2UoKSAjIFJldHVybiB0eXBlIGlzIGEgUmVzcG9uc2Ugb2JqZWN0CiAgICBwcmludChuZXdfcmVzcG9uc2UudGV4dCwgbmV3X3Jlc3BvbnNlLmNoYXRfaWQpCgogICAgIyBSZXNldCB0aGUgY2hhdAogICAgYXdhaXQgYXBpLnJlc2V0X2NoYXQoKQoKICAgICMgUmV0cmlldmUgdGhlIHNlc3Npb24gdG9rZW4gKHVzZWZ1bCBmb3IgZGVidWdnaW5nKQogICAgdG9rZW4gPSBhd2FpdCBhcGkucmV0cmlldmVfdG9rZW4oKQogICAgcHJpbnQoZiJTZXNzaW9uIFRva2VuOiB7dG9rZW59IikKCiAgICAjIFN3aXRjaCB0byBhbm90aGVyIGFjY291bnQgdXNpbmcgYSB0b2tlbiBvciBlbWFpbC9wYXNzd29yZAogICAgYXdhaXQgYXBpLnN3aXRjaF9hY2NvdW50KHRva2VuID0gIm5ld190b2tlbiIpCiAgICAjIG9yCiAgICBhd2FpdCBhcGkuc3dpdGNoX2FjY291bnQoZW1haWwgPSAibmV3X2VtYWlsIiwgcGFzc3dvcmQgPSAibmV3X3Bhc3N3b3JkIikKICAgIAogICAgYXdhaXQgYXBpLmxvZ291dCgpCiAgICBhd2FpdCBhcGkuZGVsZXRlX2NoYXRzKCkgIyBEZWxldGUgYWxsIGNoYXQgaGlzdG9yeSAgICAKICAgIGF3YWl0IGFwaS5zd2l0Y2hfY2hhdCgiY2hhdF9pZF9oZXJlIikgIyBTd2l0Y2ggdG8gYSBkaWZmZXJlbnQgY2hhdCBieSBjaGF0IElECiAgICBhd2FpdCBhcGkuc3dpdGNoX3RoZW1lKFRoZW1lLkRBUkspICMgQ2hhbmdlIHRoZSBjaGF0IHRoZW1lIChEQVJLLCBMSUdIVCwgU1lTVEVNKQoKICAgICMgTW9yZSBmZWF0dXJlcyBjb21pbmcgc29vbiEK&theme=prisma&padding=16&width=920&highlightedLines=